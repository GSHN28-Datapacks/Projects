execute align xyz if block ~ ~-3 ~ minecraft:command_block{CustomName:'"rptrain_detector_trigger"'} run setblock ~ ~-3 ~ minecraft:redstone_block
execute align xyz if block ~ ~-3 ~ minecraft:command_block{CustomName:'"rptrain_colordetector_trigger"'} run function trains115_gshn28:structure_color_detector
execute align xyz if block ~ ~-3 ~ minecraft:command_block{powered:1b,CustomName:'"rptrain_turn_trigger"'} run function trains115_gshn28:turn_trigger
execute align xyz if block ~ ~-4 ~ minecraft:command_block{CustomName:'"rptrain_slopeup_trigger"'} run function trains115_gshn28:slope_trigger_up
execute align xyz if block ~ ~-4 ~ minecraft:command_block{CustomName:'"rptrain_slopedown_trigger"'} run function trains115_gshn28:slope_trigger_down
execute if entity @s[tag=rptrain_loco,tag=rptrain_linker] align xyz if block ~ ~-3 ~ minecraft:command_block{CustomName:'"rptrain_speed_trigger"'} run function trains115_gshn28:speed_trigger
execute if entity @s[tag=rptrain_loco,tag=rptrain_linker,scores={rptrain_station=0,rptrain_speed=-20..20}] align xyz if block ~ ~-3 ~ minecraft:command_block{CustomName:'"rptrain_stationthroughleft_trigger"'} run function trains115_gshn28:station_trigger_throughleft
execute if entity @s[tag=rptrain_loco,tag=rptrain_linker,scores={rptrain_station=0,rptrain_speed=-20..20}] align xyz if block ~ ~-3 ~ minecraft:command_block{CustomName:'"rptrain_stationterminusleft_trigger"'} run function trains115_gshn28:station_trigger_terminusleft
execute if entity @s[tag=rptrain_loco,tag=rptrain_linker,scores={rptrain_station=0,rptrain_speed=-20..20}] align xyz if block ~ ~-3 ~ minecraft:command_block{CustomName:'"rptrain_stationthroughright_trigger"'} run function trains115_gshn28:station_trigger_throughright
execute if entity @s[tag=rptrain_loco,tag=rptrain_linker,scores={rptrain_station=0,rptrain_speed=-20..20}] align xyz if block ~ ~-3 ~ minecraft:command_block{CustomName:'"rptrain_stationterminusright_trigger"'} run function trains115_gshn28:station_trigger_terminusright
execute if entity @s[tag=rptrain_linker,tag=!rptrain_horn] align xyz if block ~ ~-3 ~ minecraft:command_block{CustomName:'"rptrain_horn_trigger"'} run function trains115_gshn28:sound_horn_trigger
execute if entity @s[tag=rptrain_linker,tag=!rptrain_bell] align xyz if block ~ ~-3 ~ minecraft:command_block{CustomName:'"rptrain_bell_trigger"'} run function trains115_gshn28:sound_bell_trigger
execute if entity @s[tag=rptrain_linker,tag=rptrain_horn] align xyz unless block ~ ~-3 ~ minecraft:command_block{CustomName:'"rptrain_horn_trigger"'} at @s run tag @s remove rptrain_horn
execute if entity @s[tag=rptrain_linker,tag=rptrain_bell] align xyz unless block ~ ~-3 ~ minecraft:command_block{CustomName:'"rptrain_bell_trigger"'} at @s run tag @s remove rptrain_bell
execute if score @s rptrain_speed matches 1.. if entity @s[tag=!rptrain_freerail-3] align xyz if block ~ ~-3 ~ minecraft:chain_command_block{powered:1b,CustomName:'"rptrain_freerailtool_trigger"'} run function trains115_gshn28:freerailtool_trigger-3
execute if score @s rptrain_speed matches 1.. if entity @s[tag=!rptrain_freerail-4] align xyz if block ~ ~-4 ~ minecraft:chain_command_block{powered:1b,CustomName:'"rptrain_freerailtool_trigger"'} run function trains115_gshn28:freerailtool_trigger-4
execute if score @s rptrain_speed matches ..-1 if entity @s[tag=!rptrain_freerail-3] align xyz if block ~ ~-3 ~ minecraft:chain_command_block{powered:1b,CustomName:'"rptrain_freerailtool_trigger"'} run function trains115_gshn28:freerailtool_trigger-3_rev
execute if score @s rptrain_speed matches ..-1 if entity @s[tag=!rptrain_freerail-4] align xyz if block ~ ~-4 ~ minecraft:chain_command_block{powered:1b,CustomName:'"rptrain_freerailtool_trigger"'} run function trains115_gshn28:freerailtool_trigger-4_rev
execute if entity @s[tag=rptrain_freerail-3] align xyz unless block ~ ~-3 ~ minecraft:chain_command_block{CustomName:'"rptrain_freerailtool_trigger"'} unless block ~ ~-4 ~ minecraft:chain_command_block{CustomName:'"rptrain_freerailtool_trigger"'} run tag @s remove rptrain_freerail-3
execute if entity @s[tag=rptrain_freerail-4] align xyz unless block ~ ~-4 ~ minecraft:chain_command_block{CustomName:'"rptrain_freerailtool_trigger"'} unless block ~ ~-4 ~ minecraft:chain_command_block{CustomName:'"rptrain_freerailtool_trigger"'} run tag @s remove rptrain_freerail-4

