execute unless entity @e[type=minecraft:armor_stand,tag=rptrain_freerailtool1] align xyz positioned ~0.5 ~ ~0.5 run summon minecraft:armor_stand ~ ~ ~ {CustomNameVisible:1b,NoGravity:1b,Invulnerable:0b,ShowArms:1b,NoBasePlate:1b,PersistenceRequired:1b,Tags:["rptrain_freerailtool","rptrain_freerailtool1","rptrain_spawn"],Pose:{Head:[1f,0f,0f],RightArm:[-90f,0f,0f]},DisabledSlots:4144959,Rotation:[0F,0F],ArmorItems:[{id:"minecraft:leather_boots",Count:1b,tag:{display:{color:0}}},{id:"minecraft:leather_leggings",Count:1b,tag:{display:{color:1114367}}},{id:"minecraft:leather_chestplate",Count:1b,tag:{display:{color:16745997}}},{id:"minecraft:leather_helmet",Count:1b,tag:{display:{color:16252687}}}],CustomName:'{"text":"[Rail Waypoint 1]"}'}
execute unless entity @e[type=minecraft:armor_stand,tag=rptrain_freerailtool2] if entity @e[type=minecraft:armor_stand,tag=rptrain_freerailtool1,tag=!rptrain_spawn] align xyz positioned ~0.5 ~ ~0.5 run summon minecraft:armor_stand ~ ~ ~ {CustomNameVisible:1b,NoGravity:1b,Invulnerable:0b,ShowArms:1b,NoBasePlate:1b,PersistenceRequired:1b,Tags:["rptrain_freerailtool","rptrain_freerailtool2","rptrain_spawn"],Pose:{Head:[1f,0f,0f],RightArm:[-90f,0f,0f]},DisabledSlots:4144959,Rotation:[0F,0F],ArmorItems:[{id:"minecraft:leather_boots",Count:1b,tag:{display:{color:0}}},{id:"minecraft:leather_leggings",Count:1b,tag:{display:{color:1114367}}},{id:"minecraft:leather_chestplate",Count:1b,tag:{display:{color:16745997}}},{id:"minecraft:leather_helmet",Count:1b,tag:{display:{color:16252687}}}],CustomName:'{"text":"[Rail Waypoint 2]"}'}
execute if entity @e[type=minecraft:armor_stand,tag=rptrain_freerailtool1] if entity @e[type=minecraft:armor_stand,tag=rptrain_freerailtool2] at @s run function trains115_gshn28:freerailtool_menu
execute as @e[type=minecraft:armor_stand,tag=rptrain_freerailtool1] at @s facing entity @e[type=minecraft:armor_stand,tag=rptrain_freerailtool2] feet run tp @s ~ ~ ~ ~ ~
execute as @e[type=minecraft:armor_stand,tag=rptrain_freerailtool2] at @s facing entity @e[type=minecraft:armor_stand,tag=rptrain_freerailtool1] feet run tp @s ~ ~ ~ ~ ~
execute as @e[type=minecraft:armor_stand,tag=rptrain_freerailtool] store result entity @s Pose.Head[0] float 1 run data get entity @s Rotation[1] 1
tag @e[type=minecraft:armor_stand,tag=rptrain_freerailtool,tag=rptrain_spawn] remove rptrain_spawn
kill @s

